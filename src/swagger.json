{
  "openapi": "3.0.1",
  "info": {
    "title": "Regulator portal service api",
    "description": "Regulator web portal service api",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "{scheme}://{host}",
      "description": "local server",
      "variables": {
        "scheme": {
          "enum": ["http", "https"],
          "default": "http"
        },
        "host": {
          "default": "localhost"
        }
      }
    }
  ],
  "tags": [
    {
      "name": "default",
      "description": "default tag"
    }
  ],
  "paths": {
    "/ping": {
      "get": {
        "tags": ["default"],
        "summary": "output pong.",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/text": {
                "schema": {
                  "type": "string",
                  "example": "Pong"
                }
              }
            }
          }
        }
      }
    },
    "/login": {
      "post": {
        "tags": ["default"],
        "summary": "Given an AID and vLEI, returns information about the login",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "aid": {
                    "type": "string",
                    "example": "EHYfRWfM6RxYbzyodJ6SwYytlmCCW2gw5V-FsoX5BgGx"
                  },
                  "said": {
                    "type": "string",
                    "example": "EH37Qxg6UJF_gboIFAlvqdOu7r6Tz7P7BrVAeyHo_WDL"
                  },
                  "vlei": {
                    "type": "string",
                    "example": "{}"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "aid": "EHYfRWfM6RxYbzyodJ6SwYytlmCCW2gw5V-FsoX5BgGx",
                    "said": "EH37Qxg6UJF_gboIFAlvqdOu7r6Tz7P7BrVAeyHo_WDL"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/checklogin/{aid}": {
      "get": {
        "tags": ["default"],
        "summary": "Given an AID returns information about the login",
        "parameters": [
          {
            "in": "path",
            "name": "aid",
            "required": true,
            "schema": {
              "type": "string",
              "example": "EHYfRWfM6RxYbzyodJ6SwYytlmCCW2gw5V-FsoX5BgGx"
            },
            "description": "The AID"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "aid": "EBcIURLpxmVwahksgrsGW6_dUw0zBhyEHYFk17eWrZfk",
                    "said": "EBdaAMrpqfB0PlTgI3juS8UFgIPAXC1NZd1jSk6acenf"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/upload/{aid}/{dig}": {
      "post": {
        "tags": ["default"],
        "summary": "Given an AID and DIG, returns information about the upload",
        "parameters": [
          {
            "in": "path",
            "name": "aid",
            "required": true,
            "schema": {
              "type": "string",
              "example": "EBcIURLpxmVwahksgrsGW6_dUw0zBhyEHYFk17eWrZfk"
            },
            "description": "The AID"
          },
          {
            "in": "path",
            "name": "dig",
            "required": true,
            "schema": {
              "type": "string",
              "example": "EC7b6S50sY26HTj6AtQiWMDMucsBxMvThkmrKUBXVMf0"
            },
            "description": "The digest of the upload"
          },
          {
            "in": "header",
            "name": "Signature",
            "required": true,
            "schema": {
              "type": "string",
              "example": "indexed=\"?0\";signify=\"0BCLs_wv3X6YFoFhB7acH_BePXS7zjBJPvuChdr01cM60Igf_sxYsah9sLHP-pMSYFs1Y6zYUo58HVG8tRd4X1IC\""
            },
            "description": "The signature of the data"
          },
          {
            "in": "header",
            "name": "Signature-Input",
            "required": true,
            "schema": {
              "type": "string",
              "example": "signify=(\"@method\" \"@path\" \"signify-resource\" \"signify-timestamp\");created=1690462814;keyid=\"BPmhSfdhCPxr3EqjxzEtF8TVy0YX7ATo0Uc8oo2cnmY9\";alg=\"ed25519\""
            },
            "description": "The signature of the data"
          },
          {
            "in": "header",
            "name": "Signify-Resource",
            "required": true,
            "schema": {
              "type": "string",
              "example": "EBcIURLpxmVwahksgrsGW6_dUw0zBhyEHYFk17eWrZfk"
            },
            "description": "The aid that signed the data"
          },
          {
            "in": "header",
            "name": "signify-timestamp",
            "required": true,
            "schema": {
              "type": "string",
              "example": "2023-07-27T13:00:14.802000+00:00"
            },
            "description": "The timestamp of the data"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "upload": {
                    "type": "string",
                    "format": "binary",
                    "example": "{}"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "submitter": "EBcIURLpxmVwahksgrsGW6_dUw0zBhyEHYFk17eWrZfk",
                    "filename": "test_ifgroup2023.zip",
                    "status": "verified",
                    "contentType": "application/zip",
                    "size": 4467,
                    "message": "All 6 files in report package have been signed by submitter (EBcIURLpxmVwahksgrsGW6_dUw0zBhyEHYFk17eWrZfk)."
                  }
                }
              }
            }
          }
        }
      }
    },
    "/status/{aid}": {
      "get": {
        "tags": ["default"],
        "summary": "Given an AID returns information about the upload status",
        "parameters": [
          {
            "in": "header",
            "name": "Signature",
            "required": true,
            "schema": {
              "type": "string",
              "example": "indexed=\"?0\";signify=\"0BAbJnlOwYCgQ-1SExPKoPR8AyF2luTrP207oFRSOqKNwpYIviOgA-Fp4Z11At2f3NWBwUbQRWEB8Tu3es1l_QUI\""
            },
            "description": "The signature of the data"
          },
          {
            "in": "header",
            "name": "Signature-Input",
            "required": true,
            "schema": {
              "type": "string",
              "example": "signify=(\"@method\" \"@path\" \"signify-resource\" \"signify-timestamp\");created=1690386592;keyid=\"BPmhSfdhCPxr3EqjxzEtF8TVy0YX7ATo0Uc8oo2cnmY9\";alg=\"ed25519\""
            },
            "description": "The signature of the data"
          },
          {
            "in": "header",
            "name": "Signify-Resource",
            "required": true,
            "schema": {
              "type": "string",
              "example": "EBcIURLpxmVwahksgrsGW6_dUw0zBhyEHYFk17eWrZfk"
            },
            "description": "The aid that signed the data"
          },
          {
            "in": "header",
            "name": "signify-timestamp",
            "required": true,
            "schema": {
              "type": "string",
              "example": "2023-07-26T13:00:14.802000+00:00"
            },
            "description": "The timestamp of the data"
          },
          {
            "in": "path",
            "name": "aid",
            "required": true,
            "schema": {
              "type": "string",
              "example": "EBcIURLpxmVwahksgrsGW6_dUw0zBhyEHYFk17eWrZfk"
            },
            "description": "The AID"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "aid": "EBcIURLpxmVwahksgrsGW6_dUw0zBhyEHYFk17eWrZfk",
                    "said": "EBdaAMrpqfB0PlTgI3juS8UFgIPAXC1NZd1jSk6acenf"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/verify/header": {
            "get": {
                "tags": ["default"],
                "summary": "returns if the headers are properly signed",
                "parameters": [
                    {
                        "in": "header",
                        "name": "Signature",
                        "required": "true",
                        "schema": {
                            "type": "string",
                            "example": "indexed=\"?0\";signify=\"0BB86jS2w9PKL1t-5hZIxgF9-vMNz4DsoASJR_f-u8FvnywdvosPOqbXUo97LuS-pYH_K_BPpfA2Y0XsGb2pSBoL\""
                        },
                        "description": "The signature of the data"
                    },
                    {
                        "in": "header",
                        "name": "Signature-Input",
                        "required": "true",
                        "schema": {
                            "type": "string",
                            "example": "signify=(\"@method\" \"@path\" \"signify-resource\" \"signify-timestamp\");created=1690922901;keyid=\"BPmhSfdhCPxr3EqjxzEtF8TVy0YX7ATo0Uc8oo2cnmY9\";alg=\"ed25519\""
                        },
                        "description": "The signature of the data"
                    },
                    {
                        "in": "header",
                        "name": "Signify-Resource",
                        "required": "true",
                        "schema": {
                            "type": "string",
                            "example": "EBcIURLpxmVwahksgrsGW6_dUw0zBhyEHYFk17eWrZfk"
                        },
                        "description": "The signature of the data"
                    },
                    {
                        "in": "header",
                        "name": "Signify-Timestamp",
                        "required": "true",
                        "schema": {
                            "type": "string",
                            "example": "2023-08-01T20:48:21.885000+00:00"
                        },
                        "description": "The signature of the data"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "example": {}
                                }
                            }
                        }
                    }
                }
            }
        }
    }
  }

